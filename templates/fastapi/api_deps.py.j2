#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
API依赖

这个模块定义了API依赖项。
"""

from typing import AsyncGenerator
from fastapi import Depends
from sqlalchemy.ext.asyncio import AsyncSession

from app.db.session import get_db
{% if include_auth %}
from app.utils.security import get_current_user, get_current_active_user
from app.models.user import User


def get_current_user_dep() -> User:
    """
    获取当前用户依赖
    """
    return Depends(get_current_user)


def get_current_active_user_dep() -> User:
    """
    获取当前活跃用户依赖
    """
    return Depends(get_current_active_user)
{% endif %}


def get_db_dep() -> AsyncGenerator[AsyncSession, None]:
    """
    获取数据库会话依赖
    """
    return Depends(get_db)